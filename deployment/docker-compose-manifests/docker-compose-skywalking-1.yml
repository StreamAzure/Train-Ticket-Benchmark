version: '3'
services:

#  rabbitmq:
#    image: rabbitmq:management
#    ports:
#      - 5672:5672
#      - 15672:15672
#    networks:
#      - train-ticket

  # kafka:
  #   container_name: kafka
  #   image: spotify/kafka:latest
  #   ports:
  #    - 2181:2181
  #    - 9092:9092
  #   networks:
  #     - train-ticket

#  zipkin:
#    image: openzipkin/zipkin
#    ports:
#      - 9411:9411
#    networks:
#      - train-ticket

  nacos:
    image: nacos/nacos-server:2.0.1
    ports:
      - 8848:8848
      - 9848:9848
    environment:
      - MODE=standalone
    networks:
      - train-ticket

  oap-server:
    image: apache/skywalking-oap-server:9.2.0
    container_name: oap-server
    restart: always
    networks:
      - train-ticket

  oap-ui:
    image: apache/skywalking-ui:9.2.0
    container_name: oap-ui
    restart: always
    environment:
      - SW_OAP_ADDRESS=http://oap-server:12800
    ports:
      - "8090:8080"
    networks:
      - train-ticket

  redis:
    image: redis:7.0.0
    ports:
      - 6379:6379
    networks:
      - train-ticket

  ts:
    image: mysql:5.7
    environment:
      MYSQL_ROOT_PASSWORD: root
    volumes:
      - ./mysql/init:/docker-entrypoint-initdb.d
    networks:
      - train-ticket

networks:
    train-ticket:
      # driver: overlay
      driver: bridge





